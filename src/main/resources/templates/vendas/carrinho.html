<!DOCTYPE html>

<html th:replace="~{fragments/layout :: layout(~{::head},~{::main})}" xmlns="http://www.w3.org/1999/html">

<head th:replace="fragments/head :: head(~{})"></head>

<body>
<main>
  <table class="table" border="1">
    <thead>
    <tr>
      <th>Produto</th>
      <th>Valor</th>
      <th>Quantidade</th>
      <th>Total</th>
    </tr>
    </thead>

      <tr th:each="itemvenda,posicao : ${session.venda.itens}">
        <td th:text="${itemvenda.produto.descricao}"> </td>
        <td th:text="${itemvenda.produto.valor}"> </td>
        <td th:text="${itemvenda.quantidade}"> </td>
        <td th:text="${itemvenda.total}"> </td>
        <td> <a th:href="@{/vendas/removeItemVenda/{id}(id=${posicao.index})}">Excluir</a> </td>
      </tr>

      <tr style="text-align: right">
        <td colspan="3" class="font-weight-bold">
          <label>Total do Carrinho R$</label>
              <span th:text="${session.venda.total}"></span>
        </td>
      </tr>

  </table>

  <form method="post" th:action="@{/vendas/selecionapessoafisica}" th:object="${pessoaFisica}">
        <label for="pf">Cliente</label>
          <select th:field="*{id}" id="pf" >
            <option th:each="pf : ${pessoasFisicas}" th:value="${pf.id}"  th:text="${pf.nome}"></option>
          </select>
      <input type="submit" value="Selecionar Pessoa Fisica">
  </form>

  <form method="post" th:action="@{/vendas/selecionapessoajuridica}" th:object="${pessoasJuridicas}">
    <label for="pj">Cliente</label>
    <select name="pj" id="pj" >
      <option th:each="pj : ${pessoasJuridicas}" th:value="${pj}" th:text="${pj.nome}"></option>
    </select>
    <input type="submit" value="Selecionar Pessoa Juridica">
  </form>

</main>
</body>
</html>